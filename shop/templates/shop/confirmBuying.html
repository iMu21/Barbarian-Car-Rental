{% extends 'shop/basic.html' %}
{% load static %}
{% block title %}Booking Confirmed{% endblock %}
{% block body %}

<section class="confirm-section">
  <div class="container">
    <div class="confirm-card">
      <div class="confirm-header">
        <i class="bi bi-check-circle-fill"></i>
        <h3>Booking Confirmed!</h3>
        <p>Booking Number: <strong>{{ booking.booking_number }}</strong></p>
        <p>We'll contact you shortly on your provided mobile number for further confirmation.</p>
      </div>
      <div class="confirm-body">
        <div class="detail-row">
          <span class="label">Vehicle</span>
          <span class="value">{{ booking.car.car_name }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Status</span>
          <span class="value"><span class="status-badge status-{{ booking.status }}">{{ booking.get_status_display }}</span></span>
        </div>
        <div class="detail-row">
          <span class="label">Customer</span>
          <span class="value">{{ booking.customer_name }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Email</span>
          <span class="value">{{ booking.customer_email }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Mobile</span>
          <span class="value">{{ booking.customer_mobile }}</span>
        </div>
        <div class="detail-row">
          <span class="label">Rental Hours</span>
          <span class="value">{{ booking.rental_hours }} hrs</span>
        </div>
        <div class="detail-row">
          <span class="label">Number of Cars</span>
          <span class="value">{{ booking.car_quantity }}</span>
        </div>
        {% if booking.include_driver %}
        <div class="detail-row">
          <span class="label">Driver</span>
          <span class="value">Included</span>
        </div>
        {% endif %}
        <div class="detail-row">
          <span class="label">Delivery</span>
          <span class="value">{{ booking.delivery_date }} at {{ booking.delivery_time }}</span>
        </div>
        <hr>
        <div class="detail-row">
          <span class="label">Subtotal ({{ booking.hourly_rate }} BDT/hr x {{ booking.rental_hours }}h x {{ booking.car_quantity }})</span>
          <span class="value">{{ booking.subtotal }} BDT</span>
        </div>
        {% if booking.include_driver %}
        <div class="detail-row">
          <span class="label">Driver Cost ({{ booking.driver_rate }} BDT/hr x {{ booking.rental_hours }}h x {{ booking.car_quantity }})</span>
          <span class="value">{{ booking.driver_cost }} BDT</span>
        </div>
        {% endif %}
        <div class="detail-row">
          <span class="label">Delivery Cost ({{ booking.delivery_rate }} BDT x {{ booking.car_quantity }})</span>
          <span class="value">{{ booking.delivery_cost }} BDT</span>
        </div>
        {% if booking.discount_amount > 0 %}
        <div class="detail-row">
          <span class="label">Discount{% if booking.coupon %} ({{ booking.coupon.code }}){% endif %}</span>
          <span class="value text-success">-{{ booking.discount_amount }} BDT</span>
        </div>
        {% endif %}
        <div class="detail-row">
          <span class="label">Total Cost</span>
          <span class="value">{{ booking.total_cost }} BDT</span>
        </div>
      </div>
      {% if request.user.is_authenticated %}
      <div class="text-center pb-3">
        <a href="{% url 'shop:booking_detail' booking.pk %}" class="btn btn-sm btn-outline-primary">View Booking Details</a>
        <a href="{% url 'member:dashboard' %}" class="btn btn-sm btn-outline-secondary">Go to Dashboard</a>
      </div>
      {% endif %}
    </div>
  </div>
</section>

{% endblock %}
